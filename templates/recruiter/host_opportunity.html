<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Opportunity</title>
    <link rel="stylesheet" href="/static/host_opportunity.css">
</head>

<body>
    <div class="box">
        <h2 class="h3box">{{title}}</h2>

        <form method="POST" action="/save_opportunity" enctype="multipart/form-data" onsubmit="displayPopup()">

            <input type="hidden" id="opp_id" name="opp_id" value="{{ opp_id }}">

            <label for="oppTitle" class="label-box">Opportunity Title:</label>
            <input value="{{opportunity[1]}}" type="text" id="oppTitle" name="Opp_Title" placeholder="Enter opportunity title" class="input-box" required>

            <label for="Company" class="label-box">Company Name:</label>
            <input value="{{opportunity[11]}}" type="text" id="Company" name="Company" placeholder="Enter Name of Company" class="input-box" required>

            <label for="noOfPositions" class="label-box">Number of Positions:</label>
            <input value="{{opportunity[2]}}" type="number" id="noOfPositions" name="No_of_Positions" placeholder="Enter number of positions" class="input-box" required>

            <label for="specificRequirementsFile" class="label-box">Specific Requirements File Link:</label>
            <input value="{{opportunity[3]}}" type="text" id="specificRequirementsFile" name="Specific_Requirements_file" placeholder="Add requirements file" class="input-box">

            <label for="minCPIReq" class="label-box">Minimum CPI Requirement:</label>
            <input value="{{opportunity[4]}}" type="number" step="0.1" id="minCPIReq" name="Min_CPI_req" placeholder="Enter minimum CPI requirement" class="input-box" required>

            <label for="noActiveBacklogs" class="label-box">Number of Active Backlogs:</label>
            <input value="{{opportunity[5]}}" type="text" id="noActiveBacklogs" name="No_Active_Backlogs" placeholder="Enter number of active backlogs" class="input-box" required>

            <label for="studentYearReq" class="label-box">Student Year Requirement:</label>
            <input value="{{opportunity[6]}}" type="number" id="studentYearReq" name="Student_year_req" placeholder="Enter student year requirement" class="input-box" required>

            <label for="programReq" class="label-box">Program Requirement:</label>
            <input value="{{opportunity[7]}}" type="text" id="programReq" name="Program_req" placeholder="Enter program requirement" class="input-box" required>

            <label for="jobDescriptionFile" class="label-box">Job Description File Link:</label>
            <input value="{{opportunity[8]}}" type="text" id="jobDescriptionFile" name="Job_Description_file" placeholder="Add JD File Link" class="input-box">

            <label for="salary" class="label-box">Salary:</label>
            <input value="{{opportunity[9]}}" type="number" id="salary" name="Salary" placeholder="Enter salary" class="input-box" required>

            <!-- Add other input fields as per your existing form -->

            <!-- Input field for Number of Rounds -->
            <label for="noOfRounds" class="label-box">Number of Rounds:</label>
            <input  type="number" id="noOfRounds" name="No_of_Rounds" placeholder="Enter number of rounds" class="input-box" required>

            <!-- Div to hold dynamically generated round details -->
            <div id="roundsDetails" class="roundDetails"></div>

            <input type="submit" value="{{footer}}" class="btn">
        </form>
    </div>

    <!-- JavaScript to dynamically generate round details -->
    <script>
        function displayPopup() {
            alert("Opportunity has been created successfully!");
        }
        function generateRoundFields() {
            var noOfRounds = document.getElementById('noOfRounds').value;
            var roundsDetailsDiv = document.getElementById('roundsDetails');
            roundsDetailsDiv.innerHTML = ''; // Clear previous round details
            for (var i = 1; i <= noOfRounds; i++) {
                var roundDiv = document.createElement('div');
                roundDiv.classList.add('round-details');
                roundDiv.innerHTML = ` <h4>Round ${i}</h4>
                <label for="roundType${i}">Round Type:</label>
                <select id="roundType${i}" name="Round_Type${i}" class="input-box" required>
                    <option value="">Select</option>
                    <option value="offline">Offline</option>
                    <option value="online">Online</option>
                </select>
                <label for="roundDate${i}">Round Date:</label>
                <input  type="date" id="roundDate${i}" name="Round_Date${i}" placeholder="Enter round date" class="input-box" required>
                <label for="roundVenue${i}">Venue:</label>
                <input type="text" id="roundVenue${i}" name="Round_Venue${i}" placeholder="Enter venue" class="input-box" required>
                <label for="roundStartTime${i}">Start Time:</label>
                <input type="time" id="roundStartTime${i}" name="Round_Start_Time${i}" placeholder="Enter start time" class="input-box" required>
                <label for="roundEndTime${i}">End Time:</label>
                <input type="time" id="roundEndTime${i}" name="Round_End_Time${i}" placeholder="Enter end time" class="input-box" required>`;
                roundsDetailsDiv.appendChild(roundDiv);
            }
        }

            // Call generateRoundFields function when the number of rounds input changes
            document.getElementById('noOfRounds').addEventListener('input', generateRoundFields);

            // Call generateRoundFields initially to generate fields based on the initial value
            generateRoundFields();
    </script>
</body>

</html>
